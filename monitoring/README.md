# NeuraMint Monitoring System

This directory contains the configuration for the NeuraMint monitoring and logging system, which provides comprehensive observability for the NeuraMint platform.

## Components

The monitoring stack consists of the following components:

- **Prometheus**: Time-series database for metrics collection and alerting
- **Grafana**: Visualization and dashboarding platform
- **AlertManager**: Alert handling and notification system
- **Loki**: Log aggregation system
- **Promtail**: Log collection agent for Loki
- **Node Exporter**: System metrics collector
- **cAdvisor**: Container metrics collector
- **Solana Exporter**: Solana-specific metrics collector

## Architecture

```
                   ┌─────────────┐
                   │   Grafana   │
                   └──────┬──────┘
                          │
          ┌───────────────┼───────────────┐
          │               │               │
┌─────────▼────────┐    ┌─▼─────────┐   ┌─▼────────┐
│    Prometheus    │    │   Loki    │   │AlertManager│
└─────────┬────────┘    └─▲─────────┘   └───────────┘
          │               │
┌─────────┼───────────────┼─────────────────────┐
│         │               │                     │
│  ┌──────▼──────┐   ┌────▼─────┐   ┌──────────┐│
│  │Node Exporter│   │ Promtail │   │ cAdvisor ││
│  └─────────────┘   └──────────┘   └──────────┘│
│                                               │
│  ┌──────────────┐  ┌─────────────────────┐    │
│  │Solana Exporter│  │  NeuraMint Services │    │
│  └──────────────┘  └─────────────────────┘    │
│                                               │
└───────────────────────────────────────────────┘
```

## Setup Instructions

### Prerequisites

- Docker and Docker Compose installed
- Access to the NeuraMint server environment

### Installation

1. Clone the repository:
   ```
   git clone https://github.com/NeuraMint/NRAM.git
   cd NeuraMint/monitoring
   ```

2. Configure environment variables (optional):
   ```
   cp .env.example .env
   # Edit .env file with your configuration
   ```

3. Start the monitoring stack:
   ```
   docker-compose up -d
   ```

4. Access the services:
   - Grafana: http://localhost:3000 (default credentials: admin/admin)
   - Prometheus: http://localhost:9090
   - AlertManager: http://localhost:9093
   - Loki: http://localhost:3100

### Configuration

#### Prometheus

Prometheus is configured to scrape metrics from various targets defined in `prometheus/prometheus.yml`. The main targets include:

- NeuraMint API and frontend services
- Node Exporter for system metrics
- cAdvisor for container metrics
- Solana Exporter for blockchain metrics

Alert rules are defined in `prometheus/rules/neuramint.yml`.

#### AlertManager

AlertManager handles alerts generated by Prometheus and routes them to appropriate receivers (Slack, email, etc.) based on rules defined in `alertmanager/config.yml`.

#### Loki and Promtail

Loki stores and indexes logs, while Promtail collects logs from various sources and forwards them to Loki. Configuration is in `loki/loki-config.yml` and `promtail/promtail-config.yml`.

## Dashboards

Pre-configured Grafana dashboards are available in the `grafana/provisioning/dashboards` directory:

- **NeuraMint Overview**: High-level metrics for the entire platform
- **API Performance**: Detailed metrics for the NeuraMint API
- **Frontend Performance**: User experience and frontend metrics
- **Solana Metrics**: Blockchain-specific metrics
- **System Resources**: Host-level system metrics
- **Logs Overview**: Centralized log viewing and analysis

## Alerts

The system is configured with various alerts to notify the team of potential issues:

- API performance degradation
- High error rates
- Slow page loads
- Solana RPC issues
- Failed memory transactions
- System resource constraints (CPU, memory, disk)
- Network traffic anomalies

## Maintenance

### Updating Configurations

1. Edit the configuration files as needed
2. Reload Prometheus configuration:
   ```
   curl -X POST http://localhost:9090/-/reload
   ```
3. Reload AlertManager configuration:
   ```
   curl -X POST http://localhost:9093/-/reload
   ```

### Scaling

For larger deployments, consider:

- Using remote storage for Prometheus (e.g., Thanos)
- Implementing Loki in distributed mode
- Setting up high availability for AlertManager

## Troubleshooting

Common issues and solutions:

- **Prometheus not scraping targets**: Check network connectivity and target availability
- **Alerts not firing**: Verify alert rules and thresholds
- **Missing logs in Loki**: Check Promtail configuration and log paths
- **High resource usage**: Adjust retention periods and scrape intervals

## Security Considerations

- All services are configured without authentication for local development
- For production, enable authentication and TLS
- Consider network isolation for the monitoring stack
- Regularly update all components to patch security vulnerabilities

## Contact

For issues or questions about the monitoring system, contact the NeuraMint DevOps team at devops@neuramint.com. 